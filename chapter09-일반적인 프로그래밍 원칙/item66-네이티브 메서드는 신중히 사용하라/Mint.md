# 66. 네이티브 메서드는 신중히 사용하라
## java 네이티브 인터페이스
- 자바 프로그램이 네이티브 메서드를 호출하는 기술이다.
    - 네이티브 메서드 : C나 C++ 같은 네이티브 프로그램이 언어로 작성한 메서드

### 네이티브 메서드의 쓰임새
- 레지스트리 같은 플랫폼 특화 기능을 사용할 때
- 네이티브 코드로 작성한 기존 라이브러리를 사용할 때
- 성능 개선을 목적으로 성능에 결정적인 영향을 주는 영역만 따로 네이티브 언어로 작성하는 경우
> java가 발전하면서 네이티브 메서드를 사용할 필요가 점점 줄어들고 있다.

#### 성능 개선을 목적으로 네이티브 메서드를 사용하는 것은 권장하지 않는다.
- 지금의 java는 다른 플랫폼에 견줄만한 성능을 보인다.
- 하지만 `BigInteger`의 경우 java와 달리 네이티브 라이브러리는 GMP를 필두로 개선 작업이 계속되어왔으므로 사용하는 것을 고려하자.

### 네이티브 메서드 단점
- 네이티브 언어가 안전하지 않으므로 네이티브 메서드를 사용하는 애플리케이션도 메모리 훼손 오류로부터 안전하지 않다.
    - 네이티브 언어는 직접적인 메모리 접근과 관리를 허용하기 때문에 안전하지 않다.
- 네이티브 언어는 이식성도 낮으며 디버깅도 어렵다.
- 속도가 오히려 느려질 수도 있다.
- `가비지 컬렉터`가 네이티브 메모리는 자동회수하지 못하고, 심지어 추적조차 할 수 없다.\
- java와 네이티브 경계를 넘나들때마다 비용도 추가된다.
- java와 네이티브 사이에 `접착 코드`를 작성해야 한다.

## 결론
- 네이티브 메서드를 사용하기 전에 한번 더 생각하라.
- 네이티브 메서드가 성능을 개선하는 일은 많지 않다.
- 저수준 자원이나 네이티브 라이브러리를 사용해야해서 어쩔 수 없더라도 **네이티브 코드는 최소한만 사용하고 철저히 테스트하라**.

